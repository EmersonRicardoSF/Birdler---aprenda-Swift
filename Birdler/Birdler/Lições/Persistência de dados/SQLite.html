<body>

<p>O SQLite é uma biblioteca de banco de dados leve e rápida que é amplamente utilizada em aplicativos iOS para armazenamento local de dados estruturados. Aqui está uma visão geral de como utilizar o SQLite em conjunto com o UIKit:</p>

<h2>Configuração Inicial</h2>

<p>Para utilizar o SQLite no iOS, é necessário adicionar a biblioteca SQLite ao projeto. No geral, isso pode ser feito adicionando o framework SQLite ao seu projeto Xcode.</p>

<h2>Conceitos Principais</h2>

<p>O SQLite utiliza os seguintes conceitos principais:</p>

<ul>
  <li><strong>Banco de Dados SQLite</strong>: Um arquivo que contém tabelas e índices.</li>
  <li><strong>Tabelas</strong>: Estruturas que armazenam os dados organizados em linhas e colunas.</li>
  <li><strong>SQL (Structured Query Language)</strong>: Linguagem padrão para interação com bancos de dados relacionais como o SQLite.</li>
  <li><strong>Operações CRUD</strong>: Create (Criar), Read (Ler), Update (Atualizar) e Delete (Excluir) operações para manipulação dos dados.</li>
</ul>

<h2>Exemplo de Uso</h2>

<p>Aqui está um exemplo simples de como configurar e usar o SQLite para salvar e recuperar dados em um aplicativo iOS:</p>

<pre><code>import UIKit
import SQLite3

class SQLiteManager {
    var db: OpaquePointer?

    init() {
        // Localização do arquivo do banco de dados SQLite
        let fileURL = try! FileManager.default.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false).appendingPathComponent("sqlite_database.sqlite")
        
        // Abrir o banco de dados
        if sqlite3_open(fileURL.path, &db) != SQLITE_OK {
            print("Erro ao abrir o banco de dados.")
        }
    }

    // Função para criar tabela
    func criarTabela() {
        let criarTabelaSQL = """
            CREATE TABLE IF NOT EXISTS contatos (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                nome TEXT,
                telefone TEXT
            );
        """
        
        if sqlite3_exec(db, criarTabelaSQL, nil, nil, nil) != SQLITE_OK {
            print("Erro ao criar tabela.")
        }
    }

    // Função para inserir dados
    func inserirDados(nome: String, telefone: String) {
        var stmt: OpaquePointer?
        let inserirSQL = "INSERT INTO contatos (nome, telefone) VALUES (?, ?)"

        if sqlite3_prepare(db, inserirSQL, -1, &stmt, nil) == SQLITE_OK {
            sqlite3_bind_text(stmt, 1, nome, -1, nil)
            sqlite3_bind_text(stmt, 2, telefone, -1, nil)

            if sqlite3_step(stmt) != SQLITE_DONE {
                print("Erro ao inserir dados.")
            }
        } else {
            print("Erro ao preparar inserção.")
        }

        sqlite3_finalize(stmt)
    }

    // Função para recuperar dados
    func recuperarDados() -> [String] {
        var contatos: [String] = []
        let querySQL = "SELECT nome, telefone FROM contatos"

        var stmt: OpaquePointer?

        if sqlite3_prepare(db, querySQL, -1, &stmt, nil) == SQLITE_OK {
            while sqlite3_step(stmt) == SQLITE_ROW {
                let nome = String(cString: sqlite3_column_text(stmt, 0))
                let telefone = String(cString: sqlite3_column_text(stmt, 1))
                contatos.append("\(nome): \(telefone)")
            }
        }

        sqlite3_finalize(stmt)
        return contatos
    }

    // Fechar conexão com o banco de dados
    deinit {
        sqlite3_close(db)
    }
}

// Exemplo de uso
let sqliteManager = SQLiteManager()
sqliteManager.criarTabela()
sqliteManager.inserirDados(nome: "João", telefone: "123456789")
sqliteManager.inserirDados(nome: "Maria", telefone: "987654321")
let contatos = sqliteManager.recuperarDados()
print("Contatos salvos no banco de dados:")
for contato in contatos {
    print(contato)
}
</code></pre>

<p>Neste exemplo, criamos uma classe `SQLiteManager` que encapsula as operações básicas de criação de tabela, inserção de dados e recuperação de dados utilizando o SQLite. É importante lembrar que, para utilizar o SQLite no iOS, você precisa incluir a biblioteca SQLite no projeto e gerenciar a abertura e fechamento da conexão com o banco de dados de maneira apropriada.</p>

<h2>Considerações</h2>

<p>O SQLite é uma excelente opção para armazenamento local de dados estruturados em aplicativos iOS devido à sua leveza, rapidez e familiaridade com SQL. Ele permite que você crie e gerencie bancos de dados diretamente no dispositivo, facilitando a persistência de dados essenciais para o funcionamento do seu aplicativo.</p>

</body>
</html>
